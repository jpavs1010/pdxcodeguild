<body>
    <div>Correlations</div>
    <canvas id="cnv" width="1000" height="52"></canvas>
    <!--<select id="variable1">
        {% for mapdatum in mapdata %}
        <option value="{{mapdatum.variable}}">{{mapdatum.variable}}</option>
        {% endfor %}
    </select>
    <select id="variable2">
        {% for mapdatum in mapdata %}
        <option value="{{mapdatum.variable}}">{{mapdatum.variable}}</option>
        {% endfor %}
    </select>
    <button id="correlate">Correlate</button>
    <div id="correlation">{{correlation}}</div>-->
    <!--<table>-->
        <!--<tr>-->
            <!--<td></td>-->
            <!--{% for mapdatum in mapdata%}-->
            <!--<td class="rotate">{{mapdatum.variable}}</td>-->
            <!--{% endfor %}-->
        <!--</tr>-->
        <!--{% for mapdatum in mapdata%}-->
        <!--<tr>-->
            <!--<td>{{mapdatum.variable}}</td>-->
            <!---->
        <!--</tr>-->
        <!--{% endfor %}-->
    <!--</table>-->
    {{ canvas | safe }}
    {{ table | safe }}
</body>

<style>
    div {
        font-weight: bold;
        font-size: 2em;
        width: 200px;
        height: 37px;
        margin: 0px;
        display: inline-block;
    }

</style>

<script>

//    for (var i = 0; i < array.length; i++) {
//        var option = document.createElement("option");
//        option.value = array[i];
//        option.text = array[i];
//        selectList.appendChild(option);
//    }


    function http_get(url, success) {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                var data = JSON.parse(xhttp.responseText);
                success(data);
            }
        };
        xhttp.open("GET", url);
        xhttp.send();
    };


//    var variable1 = document.getElementById('variable1');
//    var variable2 = document.getElementById('variable2');
//    var correlate = document.getElementById('correlate');
//    correlate.onclick = function() {
//        var v1 = variable1.options[variable1.selectedIndex].value;
//        var v2 = variable2.options[variable2.selectedIndex].value;
//        v1 = encodeURIComponent(v1);
//        v2 = encodeURIComponent(v2);
//        //console.log("{% url 'capstone:correlation' %}?v1="+v1+"&v2="+v2);
//        window.location = "{% url 'capstone:correlation' %}?v1="+v1+"&v2="+v2;
////        http_get("{% url 'capstone:correlation' %}", function(data) {
////            console.log(data);
////        });
//    };

    var cnv = document.getElementById('cnv');
    var ctx_draw_box = cnv.getContext("2d");
    var w = 790;
    var h = 13;
    var add_w = 50;
    var add_h = 26;



    for (i = 0; i < 2; ++i) {
        ctx_draw_box.rect(w, h, add_w, add_h);
        ctx_draw_box.rect(w, h, add_w + 50, add_h);
        ctx_draw_box.rect(w, h, add_w + 100, add_h);
        ctx_draw_box.rect(w, h, add_w + 150, add_h);
        ctx_draw_box.stroke();
    }

    // draw numbers for legend
    var ctx_draw_number = cnv.getContext("2d");

    for (i = 0; i < 1; ++i) {
        ctx_draw_number.fillText("-1.0", 780, 49);
        ctx_draw_number.fillText("-0.5", 830, 49);
        ctx_draw_number.fillText("0", 888, 49);
        ctx_draw_number.fillText("+0.5", 930, 49);
        ctx_draw_number.fillText("+1.0", 975, 49);
    }

    // draw word legend

    var ctx_title = cnv.getContext("2d");
    ctx_title.font = "11px Helvetica";
    ctx_title.fillText("Legend", 790, 10);



</script>

